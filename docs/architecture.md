# Архитектура (обзор)

Этот документ описывает целевые принципы архитектуры проектов на базе HZ Base (monorepo).

## Цели и качественные характеристики
- Масштабируемость сервисов и команд
- Надёжность и наблюдаемость
- Безопасность по умолчанию
- Автономность доменов и слабая связанность

## Аутентификация и пользователь
- Фронтенд получает JWT от сервера (`/api/auth/*`) и хранит его в localStorage.
- Профиль загружается с `/api/users/me`; запросы выполняются через `NEXT_PUBLIC_API_BASE_URL`.

## Контекст (C4 — Уровень System/Container)
- Система состоит из набора сервисов в `services/` и общих библиотек в `libs/`
- Интеграции через HTTP/gRPC/сообщения (события)
- Хранилища данных на уровне сервисов (приватные схемы, миграции)

## Домены и границы
- Каждая предметная область — отдельный сервис или модуль
- Контракты между доменами обозначены явно (API/события)

## Данные и миграции
- Миграции хранятся в репозитории сервиса
- Доступ по принципу «минимально необходимый»

## Наблюдаемость
- Логи, метрики, трассировки — стандартизированы
- Обязательные алерты на ключевые SLO

## Безопасность
- Секреты вне VCS, скан зависимостей, ревью дизайна

## Эволюция архитектуры
- Важные решения фиксируются через ADR (`docs/adr/`)
